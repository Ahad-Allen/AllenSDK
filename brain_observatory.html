<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Brain Observatory &mdash; Allen SDK dev documentation</title>
    
    <link rel="stylesheet" href="_static/aibs_sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     'dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Allen SDK dev documentation" href="index.html" />
    <link rel="up" title="Data Resources" href="data_resources.html" />
    <link rel="next" title="Cell Types" href="cell_types.html" />
    <link rel="prev" title="Data Resources" href="data_resources.html" /> 
  </head>
  <body role="document">
<link href="http://www.brain-map.org/assets/stylesheets/portal.css" media="screen" rel="stylesheet" type="text/css" />
<script src="http://www.brain-map.org/assets/javascripts/portal.js" type="text/javascript"></script>
<script src="http://www.brain-map.org/assets/javascripts/ga.js" type="text/javascript"></script>
<script type="text/javascript">
    var _pSupressBrowserFlashWarning = true;
    var _pTabId = "pHome";
    var _pMoreProjectsId = "pMoreProjects";
    var _pImagePath = "http://www.brain-map.org/assets/images/";
    var _pSiteWarnings = function() {
        this.show_warning() = {};
    }
</script>
<script type="text/javascript">
    function initialize() {
        /*** do your stuff, then initialize the portal plugin ***/
        _pPortalOnLoad();
    }
</script>
<style>
  #header_content > a {
  display: inline-block;
  width: 250px;
  height: 75px;
  background-image:url("_static/external_assets/images/Brain_Atlas_Logotype_SDK.png") !important;
  background-size: 235px 37px;
  background-position: 0px 20px;
  background-repeat: no-repeat;
  }
</style>

<script type="text/javascript" src="http://www.brain-map.org/external_assets/javascripts/portalHeader.js"></script>
<link rel="stylesheet" type="text/css" href="_static/external_assets/stylesheets/common_layout.css" />


  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="brain-observatory">
<h1>Brain Observatory<a class="headerlink" href="#brain-observatory" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference external" href="http://observatory.brain-map.org/visualcoding">Allen Brain Observatory</a> is a database of the visually-evoked functional
responses of neurons in mouse visual cortex based on 2-photon fluorescence imaging.  Characterized responses include orientation
tuning, spatial and temporal frequency tuning, temporal dynamics, and spatial receptive field structure.</p>
<p>The data is organized into experiments and experiment containers.  An experiment container represents a group of
experiments with the same targeted imaging area, imaging depth, and Cre line.  The individual experiments within
an experiment container have different stimulus protocols, but cover the same imaging field of view.</p>
<img alt="_static/container_session_layout.png" class="align-center" src="_static/container_session_layout.png" />
<p><strong>Note:</strong> Data collected after September 2016 uses a new session C stimulus designed to better-characterize spatial receptive fields in
higher visual areas.  The original locally sparse noise stimulus used 4.65 visual degree pixels.  Session C2 broke that stimulus
into two separate stimulus blocks: one with 4.65 degree pixels and one with 9.3 degree pixels.  Note that the <a class="reference internal" href="allensdk.brain_observatory.html#module-allensdk.brain_observatory.stimulus_info" title="allensdk.brain_observatory.stimulus_info"><code class="xref py py-mod docutils literal"><span class="pre">stimulus_info</span></code></a>
module refers to these as <cite>locally_sparse_noise_4deg</cite> and <cite>locally_sparse_noise_8deg</cite>, respectively.</p>
<p>For more information on experimental design and a data overview, please visit the <a class="reference external" href="http://observatory.brain-map.org/visualcoding">Allen Brain Observatory data portal</a>.</p>
<div class="section" id="data-processing">
<h2>Data Processing<a class="headerlink" href="#data-processing" title="Permalink to this headline">¶</a></h2>
<p>For all data in Allen Brain Observatory, we perform the following processing:</p>
<blockquote>
<div><ol class="arabic simple">
<li>Segment cell masks from each experiment&#8217;s 2-photon fluorescence video</li>
<li>Associate cells from experiments belonging to the same experiment container and assign unique IDs</li>
<li>Extract each cell&#8217;s mean fluorescence trace</li>
<li>Extract mean fluorescence traces from each cell&#8217;s surrounding neuropil</li>
<li>Demix traces from overlapping ROIs</li>
<li>Estimate neuropil-corrected fluorescence traces</li>
<li>Compute dF/F</li>
<li>Compute stimulus-specific tuning metrics</li>
</ol>
</div></blockquote>
<p>All traces and masks for segmented cells in an experiment are stored in a Neurodata Without Borders (NWB) file.
Stored traces include the raw fluoresence trace, neuropil trace, demixed trace, and dF/F trace.  Code for extracting neuropil-corrected
fluorescence traces, computing dF/F, and computing tuning metrics is available in the SDK.</p>
<p><strong>New in June 2017:</strong> Trace demixing is a new addition as of June 2017.  All past data was reprocessed using the new demixing algorithm.
We have also developed a new module to better characterize a cell&#8217;s receptive field.  Take a look at the
<a class="reference external" href="_static/examples/nb/receptive_fields.html">receptive field analysis example notebook</a></p>
<p>For more information about data processing, please <a class="reference external" href="http://help.brain-map.org/display/observatory/Documentation">read the technical whitepapers</a>.</p>
</div>
<div class="section" id="getting-started">
<h2>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h2>
<p>The Brain Observatory <a class="reference external" href="_static/examples/nb/brain_observatory.html">Jupyter notebook</a> has many code samples to help get
started with the available data:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="_static/examples/nb/brain_observatory.html#Experiment-Containers">Download experimental metadata by visual area, imaging depth, and Cre line</a></li>
<li><a class="reference external" href="_static/examples/nb/brain_observatory.html#Find-Cells-of-Interest">Find cells with specific response properties, like direction tuning</a></li>
<li><a class="reference external" href="_static/examples/nb/brain_observatory.html#Download-Experiment-Data-for-a-Cell">Download data for an experiment</a></li>
<li><a class="reference external" href="_static/examples/nb/brain_observatory.html#Fluorescence-Traces">Plot raw fluorescences traces, neuropil-corrected traces, and dF/F</a></li>
<li><a class="reference external" href="_static/examples/nb/brain_observatory.html#ROI-Masks">Find the ROI mask for a given cell</a></li>
<li><a class="reference external" href="_static/examples/nb/brain_observatory.html#Neuropil-Correction">Run neuropil correction</a></li>
<li><a class="reference external" href="_static/examples/nb/brain_observatory.html#Eye-Tracking">Get pupil location and size</a></li>
</ul>
</div></blockquote>
<p>The code used to analyze and visualize data in the <a class="reference external" href="http://observatory.brain-map.org/visualcoding">Allen Brain Observatory data portal</a>
is available as part of the SDK.  Take a look at this <a class="reference external" href="_static/examples/nb/brain_observatory_analysis.html">Jupyter notebook</a> to find out how to:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="_static/examples/nb/brain_observatory_analysis.html#Drifting-Gratings">Plot cell&#8217;s response to its preferred stimulus condition</a></li>
<li><a class="reference external" href="_static/examples/nb/receptive_fields.html">Compute a cell&#8217;s on/off receptive field based on the locally sparse noise stimulus</a></li>
</ul>
</div></blockquote>
<p>More detailed documentation is available demonstrating how to:</p>
<blockquote>
<div><ul class="simple">
<li><a class="reference external" href="_static/examples/nb/brain_observatory_stimuli.html">Read and visualize the stimulus presentation tables in the NWB files</a></li>
<li><a class="reference external" href="brain_observatory_nwb.html">Understand the layout of Brain Observatory NWB files</a></li>
<li><a class="reference external" href="_static/examples/nb/cell_specimen_mapping.html">Map previous cell specimen IDs to current cell specimen IDs</a></li>
</ul>
</div></blockquote>
</div>
<div class="section" id="precomputed-cell-metrics">
<h2>Precomputed Cell Metrics<a class="headerlink" href="#precomputed-cell-metrics" title="Permalink to this headline">¶</a></h2>
<p>A large table of precomputed metrics are available for download to support population analysis and filtering.  The table below describes
all of the metrics in the table.  The <a class="reference internal" href="allensdk.core.html#allensdk.core.brain_observatory_cache.BrainObservatoryCache.get_cell_specimens" title="allensdk.core.brain_observatory_cache.BrainObservatoryCache.get_cell_specimens"><code class="xref py py-meth docutils literal"><span class="pre">get_cell_specimens()</span></code></a> method
will download this table as a list of dictionaries which can be converted to a pandas DataFrame as shown in this
<a class="reference external" href="_static/examples/nb/brain_observatory.html#Find-Cells-of-Interest">Jupyter notebook</a>.</p>
<table border="1" class="docutils">
<colgroup>
<col width="24%" />
<col width="38%" />
<col width="38%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Stimulus</th>
<th class="head">Metric</th>
<th class="head">Field Name</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td rowspan="12">drifting gratings</td>
<td>orientation selectivity</td>
<td>osi_dg</td>
</tr>
<tr class="row-odd"><td>direction selectivity</td>
<td>dsi_dg</td>
</tr>
<tr class="row-even"><td>preferred direction</td>
<td>pref_dir_dg</td>
</tr>
<tr class="row-odd"><td>preferred temporal frequency</td>
<td>pref_tf_dg</td>
</tr>
<tr class="row-even"><td>response p value</td>
<td>p_dg</td>
</tr>
<tr class="row-odd"><td>global ori. selectivity</td>
<td>g_osi_dg</td>
</tr>
<tr class="row-even"><td>global dir. selectivity</td>
<td>g_dsi_dg</td>
</tr>
<tr class="row-odd"><td>response reliability</td>
<td>reliability_dg</td>
</tr>
<tr class="row-even"><td>running modulation</td>
<td>run_mod_dg</td>
</tr>
<tr class="row-odd"><td>running modulation p value</td>
<td>p_run_mod_dg</td>
</tr>
<tr class="row-even"><td>pref. condition mean df/f</td>
<td>peak_dff_dg</td>
</tr>
<tr class="row-odd"><td>TF discrimination index</td>
<td>tfdi_dg</td>
</tr>
<tr class="row-even"><td rowspan="12">static gratings</td>
<td>orientation selectivity</td>
<td>osi_sg</td>
</tr>
<tr class="row-odd"><td>preferred orientation</td>
<td>pref_ori_sg</td>
</tr>
<tr class="row-even"><td>preferred spatial frequency</td>
<td>pref_sf_sg</td>
</tr>
<tr class="row-odd"><td>preferred phase</td>
<td>pref_phase_sg</td>
</tr>
<tr class="row-even"><td>mean time to peak response</td>
<td>time_to_peak_sg</td>
</tr>
<tr class="row-odd"><td>response p value</td>
<td>p_sg</td>
</tr>
<tr class="row-even"><td>global ori. selectivity</td>
<td>g_osi_sg</td>
</tr>
<tr class="row-odd"><td>reponse reliability</td>
<td>reliability_sg</td>
</tr>
<tr class="row-even"><td>running modulation</td>
<td>run_mod_sg</td>
</tr>
<tr class="row-odd"><td>running modulation p value</td>
<td>p_run_mod_sg</td>
</tr>
<tr class="row-even"><td>pref. condition mean df/f</td>
<td>peak_dff_ns</td>
</tr>
<tr class="row-odd"><td>SF discrimiation index</td>
<td>sfdi_sg</td>
</tr>
<tr class="row-even"><td rowspan="7">natural scenes</td>
<td>mean time to peak response</td>
<td>time_to_peak_ns</td>
</tr>
<tr class="row-odd"><td>preferred scene index</td>
<td>pref_scene_ns</td>
</tr>
<tr class="row-even"><td>response p value</td>
<td>p_ns</td>
</tr>
<tr class="row-odd"><td>image selectivity</td>
<td>image_sel_ns</td>
</tr>
<tr class="row-even"><td>running modulation</td>
<td>run_mod_ns</td>
</tr>
<tr class="row-odd"><td>running modulation p value</td>
<td>p_run_mod_ns</td>
</tr>
<tr class="row-even"><td>pref. condition mean df/f</td>
<td>peak_dff_ns</td>
</tr>
<tr class="row-odd"><td rowspan="3">natural movie 1</td>
<td>response reliability (session A)</td>
<td>reliability_nm1_a</td>
</tr>
<tr class="row-even"><td>response reliability (session B)</td>
<td>reliability_nm1_b</td>
</tr>
<tr class="row-odd"><td>response reliability (session C)</td>
<td>reliability_nm1_c</td>
</tr>
<tr class="row-even"><td>natural movie 2</td>
<td>response reliability</td>
<td>reliability_nm2</td>
</tr>
<tr class="row-odd"><td>natural movie 3</td>
<td>response reliability</td>
<td>reliability_nm3</td>
</tr>
<tr class="row-even"><td rowspan="7">locally sparse noise</td>
<td>RF area (on subunit)</td>
<td>rf_area_on_lsn</td>
</tr>
<tr class="row-odd"><td>RF area (off subunit)</td>
<td>rf_area_off_lsn</td>
</tr>
<tr class="row-even"><td>RF center (on subunit)</td>
<td>rf_center_on_x, rf_center_on_y</td>
</tr>
<tr class="row-odd"><td>RF center (off subunit)</td>
<td>rf_center_off_x, rf_center_off_y</td>
</tr>
<tr class="row-even"><td>RF chi^2</td>
<td>rf_chi2_lsn</td>
</tr>
<tr class="row-odd"><td>RF on-off subunit distance</td>
<td>rf_distance_lsn</td>
</tr>
<tr class="row-even"><td>RF on-off subunit overlap index</td>
<td>rf_overlap_lsn</td>
</tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install Guide</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="data_resources.html">Data Resources</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Brain Observatory</a></li>
<li class="toctree-l2"><a class="reference internal" href="cell_types.html">Cell Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="connectivity.html">Mouse Connectivity</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference_space.html">Reference Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_api_client.html">API Access</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="glif_models.html">Generalized LIF</a></li>
<li class="toctree-l2"><a class="reference internal" href="biophysical_models.html">Biophysical</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="allensdk.html">Source Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="allensdk.api.html">allensdk.api package</a></li>
<li class="toctree-l2"><a class="reference internal" href="allensdk.brain_observatory.html">allensdk.brain_observatory package</a></li>
<li class="toctree-l2"><a class="reference internal" href="allensdk.config.html">allensdk.config package</a></li>
<li class="toctree-l2"><a class="reference internal" href="allensdk.core.html">allensdk.core package</a></li>
<li class="toctree-l2"><a class="reference internal" href="allensdk.ephys.html">allensdk.ephys package</a></li>
<li class="toctree-l2"><a class="reference internal" href="allensdk.model.html">allensdk.model package</a></li>
<li class="toctree-l2"><a class="reference internal" href="allensdk.morphology.html">allensdk.morphology package</a></li>
<li class="toctree-l2"><a class="reference internal" href="allensdk.test_utilities.html">allensdk.test_utilities package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/AllenInstitute/AllenSDK">Github Profile</a></li>
</ul>

<h3> Questions </h3>
<p class="questions">
  Send any questions using the <a href="http://alleninstitute.org/contact_us/index.html">Send Us a Message</a> link below, 
  or submit your question to <a href="http://stackoverflow.com/">StackOverflow</a> using with the 'allen-sdk' tag.
</p>

<p class="questions">
  If you encounter any problems using the AllenSDK, please create an issue on <a href="http://github.com/alleninstitute/allensdk/issues/">Github's issue tracker</a>.
</p>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>


    <div class="footer" role="contentinfo">
    </div>
<script type="text/javascript" src="http://www.brain-map.org/external_assets/javascripts/portalFooter.js"></script>


  </body>
</html>