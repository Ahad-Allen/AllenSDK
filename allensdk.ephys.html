<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>allensdk.ephys package &mdash; Allen SDK 0.14.3 documentation</title>
    
    <link rel="stylesheet" href="_static/aibs_sphinx.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.14.3',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="Allen SDK 0.14.3 documentation" href="index.html" />
    <link rel="up" title="allensdk package" href="allensdk.html" />
    <link rel="next" title="allensdk.model package" href="allensdk.model.html" />
    <link rel="prev" title="allensdk.core package" href="allensdk.core.html" /> 
  </head>
  <body role="document">
<link href="http://www.brain-map.org/assets/stylesheets/portal.css" media="screen" rel="stylesheet" type="text/css" />
<script src="http://www.brain-map.org/assets/javascripts/portal.js" type="text/javascript"></script>
<script src="http://www.brain-map.org/assets/javascripts/ga.js" type="text/javascript"></script>
<script type="text/javascript">
    var _pSupressBrowserFlashWarning = true;
    var _pTabId = "pHome";
    var _pMoreProjectsId = "pMoreProjects";
    var _pImagePath = "http://www.brain-map.org/assets/images/";
    var _pSiteWarnings = function() {
        this.show_warning() = {};
    }
</script>
<script type="text/javascript">
    function initialize() {
        /*** do your stuff, then initialize the portal plugin ***/
        _pPortalOnLoad();
    }
</script>
<style>
  #header_content > a {
  display: inline-block;
  width: 250px;
  height: 75px;
  background-image:url("/AllenSDK/_static/external_assets/images/Brain_Atlas_Logotype_SDK.png") !important;
  background-size: 235px 37px;
  background-position: 0px 20px;
  background-repeat: no-repeat;
  }
</style>

<script type="text/javascript" src="http://www.brain-map.org/external_assets/javascripts/portalHeader.js"></script>
<link rel="stylesheet" type="text/css" href="/AllenSDK/_static/external_assets/stylesheets/common_layout.css" />


  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="allensdk-ephys-package">
<h1>allensdk.ephys package<a class="headerlink" href="#allensdk-ephys-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-allensdk.ephys.ephys_extractor">
<span id="allensdk-ephys-ephys-extractor-module"></span><h2>allensdk.ephys.ephys_extractor module<a class="headerlink" href="#module-allensdk.ephys.ephys_extractor" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor">
<em class="property">class </em><code class="descclassname">allensdk.ephys.ephys_extractor.</code><code class="descname">EphysCellFeatureExtractor</code><span class="sig-paren">(</span><em>ramps_ext</em>, <em>short_squares_ext</em>, <em>long_squares_ext</em>, <em>subthresh_min_amp=-100</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysCellFeatureExtractor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor" title="Permalink to this definition">¶</a></dt>
<dd><dl class="attribute">
<dt id="allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.SAG_TARGET">
<code class="descname">SAG_TARGET</code><em class="property"> = -100.0</em><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.SAG_TARGET" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.SUBTHRESH_MAX_AMP">
<code class="descname">SUBTHRESH_MAX_AMP</code><em class="property"> = 0</em><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.SUBTHRESH_MAX_AMP" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysCellFeatureExtractor.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create dict of cell features.</p>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.cell_features">
<code class="descname">cell_features</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysCellFeatureExtractor.cell_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.cell_features" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.long_squares_features">
<code class="descname">long_squares_features</code><span class="sig-paren">(</span><em>option=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysCellFeatureExtractor.long_squares_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.long_squares_features" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.long_squares_stim_amps">
<code class="descname">long_squares_stim_amps</code><span class="sig-paren">(</span><em>option=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysCellFeatureExtractor.long_squares_stim_amps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.long_squares_stim_amps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.process">
<code class="descname">process</code><span class="sig-paren">(</span><em>keys=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysCellFeatureExtractor.process"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.process" title="Permalink to this definition">¶</a></dt>
<dd><p>Processes features. Can take a specific key (or set of keys) to do a subset of processing.</p>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.ramps_features">
<code class="descname">ramps_features</code><span class="sig-paren">(</span><em>all=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysCellFeatureExtractor.ramps_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.ramps_features" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.short_squares_features">
<code class="descname">short_squares_features</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysCellFeatureExtractor.short_squares_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysCellFeatureExtractor.short_squares_features" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor">
<em class="property">class </em><code class="descclassname">allensdk.ephys.ephys_extractor.</code><code class="descname">EphysSweepFeatureExtractor</code><span class="sig-paren">(</span><em>t=None</em>, <em>v=None</em>, <em>i=None</em>, <em>start=None</em>, <em>end=None</em>, <em>filter=10.0</em>, <em>dv_cutoff=20.0</em>, <em>max_interval=0.005</em>, <em>min_height=2.0</em>, <em>min_peak=-30.0</em>, <em>thresh_frac=0.05</em>, <em>baseline_interval=0.1</em>, <em>baseline_detect_thresh=0.3</em>, <em>id=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Feature calculation for a sweep (voltage and/or current time series).</p>
<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.as_dict">
<code class="descname">as_dict</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.as_dict"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.as_dict" title="Permalink to this definition">¶</a></dt>
<dd><p>Create dict of features and spikes.</p>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.burst_metrics">
<code class="descname">burst_metrics</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.burst_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.burst_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Find bursts and return max &#8220;burstiness&#8221; index (normalized max rate in burst vs out).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>max_burstiness_index</strong> : max &#8220;burstiness&#8221; index across detected bursts</p>
<p class="last"><strong>num_bursts</strong> : number of bursts detected</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.delay_metrics">
<code class="descname">delay_metrics</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.delay_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.delay_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates ratio of latency to dominant time constant of rise before spike</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>delay_ratio</strong> : ratio of latency to tau (higher means more delay)</p>
<p class="last"><strong>tau</strong> : dominant time constant of rise before spike</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.estimate_sag">
<code class="descname">estimate_sag</code><span class="sig-paren">(</span><em>peak_width=0.005</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.estimate_sag"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.estimate_sag" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the sag in a hyperpolarizing voltage response.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>peak_width</strong> : window width to get more robust peak estimate in sec (default 0.005)</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><strong>sag</strong> : fraction that membrane potential relaxes back to baseline</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.estimate_time_constant">
<code class="descname">estimate_time_constant</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.estimate_time_constant"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.estimate_time_constant" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the membrane time constant by fitting the voltage response with a
single exponential.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><strong>tau</strong> : membrane time constant in seconds</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.is_spike_feature_affected_by_clipping">
<code class="descname">is_spike_feature_affected_by_clipping</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.is_spike_feature_affected_by_clipping"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.is_spike_feature_affected_by_clipping" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.pause_metrics">
<code class="descname">pause_metrics</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.pause_metrics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.pause_metrics" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate average number of pauses and average fraction of time spent in a pause</p>
<p>Attempts to detect pauses with a variety of conditions and averages results together.</p>
<p>Pauses that are consistently detected contribute more to estimates.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>avg_n_pauses</strong> : average number of pauses detected across conditions</p>
<p><strong>avg_pause_frac</strong> : average fraction of interval (between start and end) spent in a pause</p>
<p><strong>max_reliability</strong> : max fraction of times most reliable pause was detected given weights tested</p>
<p class="last"><strong>n_max_rel_pauses</strong> : number of pauses detected with <cite>max_reliability</cite></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.process_new_spike_feature">
<code class="descname">process_new_spike_feature</code><span class="sig-paren">(</span><em>feature_name</em>, <em>feature_func</em>, <em>affected_by_clipping=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.process_new_spike_feature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.process_new_spike_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Add new spike-level feature calculation function</p>
<p>The function should take this sweep extractor as its argument. Its results
can be accessed by calling the method spike_feature(&lt;feature_name&gt;).</p>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.process_new_sweep_feature">
<code class="descname">process_new_sweep_feature</code><span class="sig-paren">(</span><em>feature_name</em>, <em>feature_func</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.process_new_sweep_feature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.process_new_sweep_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Add new sweep-level feature calculation function</p>
<p>The function should take this sweep extractor as its argument. Its results
can be accessed by calling the method sweep_feature(&lt;feature_name&gt;).</p>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.process_spikes">
<code class="descname">process_spikes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.process_spikes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.process_spikes" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform spike-related feature analysis</p>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.set_stimulus_amplitude_calculator">
<code class="descname">set_stimulus_amplitude_calculator</code><span class="sig-paren">(</span><em>function</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.set_stimulus_amplitude_calculator"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.set_stimulus_amplitude_calculator" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.spike_feature">
<code class="descname">spike_feature</code><span class="sig-paren">(</span><em>key</em>, <em>include_clipped=False</em>, <em>force_exclude_clipped=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.spike_feature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.spike_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Get specified feature for every spike.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>key</strong> : feature name</p>
<p><strong>include_clipped: return values for every identified spike, even when clipping means they will be incorrect/undefined</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>spike_feature_values</strong> : ndarray of features for each spike</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.spike_feature_keys">
<code class="descname">spike_feature_keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.spike_feature_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.spike_feature_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of every available spike feature.</p>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.spikes">
<code class="descname">spikes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.spikes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.spikes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get all features for each spike as a list of records.</p>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.stimulus_amplitude">
<code class="descname">stimulus_amplitude</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.stimulus_amplitude"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.stimulus_amplitude" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.sweep_feature">
<code class="descname">sweep_feature</code><span class="sig-paren">(</span><em>key</em>, <em>allow_missing=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.sweep_feature"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.sweep_feature" title="Permalink to this definition">¶</a></dt>
<dd><p>Get sweep-level feature (<cite>key</cite>).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>key</strong> : name of sweep-level feature</p>
<p><strong>allow_missing</strong> : return np.nan if key is missing for sweep (default False)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>sweep_feature</strong> : sweep-level feature value</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.sweep_feature_keys">
<code class="descname">sweep_feature_keys</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.sweep_feature_keys"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.sweep_feature_keys" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of every available sweep-level feature.</p>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.voltage_deflection">
<code class="descname">voltage_deflection</code><span class="sig-paren">(</span><em>deflect_type=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepFeatureExtractor.voltage_deflection"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepFeatureExtractor.voltage_deflection" title="Permalink to this definition">¶</a></dt>
<dd><p>Measure deflection (min or max, between start and end if specified).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>deflect_type</strong> : measure minimal (&#8216;min&#8217;) or maximal (&#8216;max&#8217;) voltage deflection</p>
<blockquote>
<div><p>If not specified, it will check to see if the current (i) is positive or negative
between start and end, then choose &#8216;max&#8217; or &#8216;min&#8217;, respectively
If the current is not defined, it will default to &#8216;min&#8217;.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>deflect_v</strong> : peak</p>
<p class="last"><strong>deflect_index</strong> : index of peak deflection</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepSetFeatureExtractor">
<em class="property">class </em><code class="descclassname">allensdk.ephys.ephys_extractor.</code><code class="descname">EphysSweepSetFeatureExtractor</code><span class="sig-paren">(</span><em>t_set=None</em>, <em>v_set=None</em>, <em>i_set=None</em>, <em>start=None</em>, <em>end=None</em>, <em>filter=10.0</em>, <em>dv_cutoff=20.0</em>, <em>max_interval=0.005</em>, <em>min_height=2.0</em>, <em>min_peak=-30.0</em>, <em>thresh_frac=0.05</em>, <em>baseline_interval=0.1</em>, <em>baseline_detect_thresh=0.3</em>, <em>id_set=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepSetFeatureExtractor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepSetFeatureExtractor" title="Permalink to this definition">¶</a></dt>
<dd><dl class="classmethod">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepSetFeatureExtractor.from_sweeps">
<em class="property">classmethod </em><code class="descname">from_sweeps</code><span class="sig-paren">(</span><em>sweep_list</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepSetFeatureExtractor.from_sweeps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepSetFeatureExtractor.from_sweeps" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize EphysSweepSetFeatureExtractor object with a list of pre-existing
sweep feature extractor objects.</p>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepSetFeatureExtractor.process_spikes">
<code class="descname">process_spikes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepSetFeatureExtractor.process_spikes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepSetFeatureExtractor.process_spikes" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze spike features for all sweeps.</p>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepSetFeatureExtractor.spike_feature_averages">
<code class="descname">spike_feature_averages</code><span class="sig-paren">(</span><em>key</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepSetFeatureExtractor.spike_feature_averages"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepSetFeatureExtractor.spike_feature_averages" title="Permalink to this definition">¶</a></dt>
<dd><p>Get nparray of average spike-level feature (<cite>key</cite>) for all sweeps</p>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepSetFeatureExtractor.sweep_features">
<code class="descname">sweep_features</code><span class="sig-paren">(</span><em>key</em>, <em>allow_missing=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepSetFeatureExtractor.sweep_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepSetFeatureExtractor.sweep_features" title="Permalink to this definition">¶</a></dt>
<dd><p>Get nparray of sweep-level feature (<cite>key</cite>) for all sweeps</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>key</strong> : name of sweep-level feature</p>
<p><strong>allow_missing</strong> : return np.nan if key is missing for sweep (default False)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>sweep_feature</strong> : nparray of sweep-level feature values</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="allensdk.ephys.ephys_extractor.EphysSweepSetFeatureExtractor.sweeps">
<code class="descname">sweeps</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#EphysSweepSetFeatureExtractor.sweeps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.EphysSweepSetFeatureExtractor.sweeps" title="Permalink to this definition">¶</a></dt>
<dd><p>Get list of EphysSweepFeatureExtractor objects.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_extractor.cell_extractor_for_nwb">
<code class="descclassname">allensdk.ephys.ephys_extractor.</code><code class="descname">cell_extractor_for_nwb</code><span class="sig-paren">(</span><em>dataset</em>, <em>ramps</em>, <em>short_squares</em>, <em>long_squares</em>, <em>subthresh_min_amp=-100</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#cell_extractor_for_nwb"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.cell_extractor_for_nwb" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize EphysCellFeatureExtractor object from NWB data set</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dataset</strong> : NwbDataSet</p>
<p><strong>ramps</strong> : list of sweep numbers of ramp sweeps</p>
<p><strong>short_squares</strong> : list of sweep numbers of short square sweeps</p>
<p class="last"><strong>long_squares</strong> : list of sweep numbers of long square sweeps</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_extractor.extractor_for_nwb_sweeps">
<code class="descclassname">allensdk.ephys.ephys_extractor.</code><code class="descname">extractor_for_nwb_sweeps</code><span class="sig-paren">(</span><em>dataset</em>, <em>sweep_numbers</em>, <em>fixed_start=None</em>, <em>fixed_end=None</em>, <em>dv_cutoff=20.0</em>, <em>thresh_frac=0.05</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#extractor_for_nwb_sweeps"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.extractor_for_nwb_sweeps" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_extractor.fit_fi_slope">
<code class="descclassname">allensdk.ephys.ephys_extractor.</code><code class="descname">fit_fi_slope</code><span class="sig-paren">(</span><em>ext</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#fit_fi_slope"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.fit_fi_slope" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the rate and stimulus amplitude to a line and return the slope of the fit.</p>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_extractor.input_resistance">
<code class="descclassname">allensdk.ephys.ephys_extractor.</code><code class="descname">input_resistance</code><span class="sig-paren">(</span><em>ext</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#input_resistance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.input_resistance" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate input resistance in MOhms, assuming all sweeps in passed extractor
are hyperpolarizing responses.</p>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_extractor.membrane_time_constant">
<code class="descclassname">allensdk.ephys.ephys_extractor.</code><code class="descname">membrane_time_constant</code><span class="sig-paren">(</span><em>ext</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#membrane_time_constant"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.membrane_time_constant" title="Permalink to this definition">¶</a></dt>
<dd><p>Average the membrane time constant values estimated from each sweep in passed extractor.</p>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_extractor.reset_long_squares_start">
<code class="descclassname">allensdk.ephys.ephys_extractor.</code><code class="descname">reset_long_squares_start</code><span class="sig-paren">(</span><em>when</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_extractor.html#reset_long_squares_start"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_extractor.reset_long_squares_start" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="module-allensdk.ephys.ephys_features">
<span id="allensdk-ephys-ephys-features-module"></span><h2>allensdk.ephys.ephys_features module<a class="headerlink" href="#module-allensdk.ephys.ephys_features" title="Permalink to this headline">¶</a></h2>
<dl class="exception">
<dt id="allensdk.ephys.ephys_features.FeatureError">
<em class="property">exception </em><code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">FeatureError</code><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#FeatureError"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.FeatureError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<p>Generic Python-exception-derived object raised by feature detection functions.</p>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.adaptation_index">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">adaptation_index</code><span class="sig-paren">(</span><em>isis</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#adaptation_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.adaptation_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate adaptation index of <cite>isis</cite>.</p>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.analyze_trough_details">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">analyze_trough_details</code><span class="sig-paren">(</span><em>v</em>, <em>t</em>, <em>spike_indexes</em>, <em>peak_indexes</em>, <em>clipped=None</em>, <em>end=None</em>, <em>filter=10.0</em>, <em>heavy_filter=1.0</em>, <em>term_frac=0.01</em>, <em>adp_thresh=0.5</em>, <em>tol=0.5</em>, <em>flat_interval=0.002</em>, <em>adp_max_delta_t=0.005</em>, <em>adp_max_delta_v=10.0</em>, <em>dvdt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#analyze_trough_details"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.analyze_trough_details" title="Permalink to this definition">¶</a></dt>
<dd><p>Analyze trough to determine if an ADP exists and whether the reset is a &#8216;detour&#8217; or &#8216;direct&#8217;</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : numpy array of voltage time series in mV</p>
<p><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>spike_indexes</strong> : numpy array of spike indexes</p>
<p><strong>peak_indexes</strong> : numpy array of spike peak indexes</p>
<p><strong>end</strong> : end of time window (optional)</p>
<p><strong>filter</strong> : cutoff frequency for 4-pole low-pass Bessel filter in kHz (default 1)</p>
<p><strong>heavy_filter</strong> : lower cutoff frequency for 4-pole low-pass Bessel filter in kHz (default 1)</p>
<p><strong>thresh_frac</strong> : fraction of average upstroke for threshold calculation (optional, default 0.05)</p>
<p><strong>adp_thresh: minimum dV/dt in V/s to exceed to be considered to have an ADP (optional, default 1.5)</strong></p>
<p><strong>tol</strong> : tolerance for evaluating whether Vm drops appreciably further after end of spike (default 1.0 mV)</p>
<p><strong>flat_interval: if the trace is flat for this duration, stop looking for an ADP (default 0.002 s)</strong></p>
<p><strong>adp_max_delta_t: max possible ADP delta t (default 0.005 s)</strong></p>
<p><strong>adp_max_delta_v: max possible ADP delta v (default 10 mV)</strong></p>
<p><strong>dvdt</strong> : pre-calculated time-derivative of voltage (optional)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>isi_types</strong> : numpy array of isi reset types (direct or detour)</p>
<p><strong>fast_trough_indexes</strong> : numpy array of indexes at the start of the trough (i.e. end of the spike)</p>
<p><strong>adp_indexes</strong> : numpy array of adp indexes (np.nan if there was no ADP in that ISI</p>
<p><strong>slow_trough_indexes</strong> : numpy array of indexes at the minimum of the slow phase of the trough</p>
<blockquote class="last">
<div><p>(if there wasn&#8217;t just a fast phase)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.average_rate">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">average_rate</code><span class="sig-paren">(</span><em>t</em>, <em>spikes</em>, <em>start</em>, <em>end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#average_rate"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.average_rate" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate average firing rate during interval between <cite>start</cite> and <cite>end</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>spikes</strong> : numpy array of spike indexes</p>
<p><strong>start</strong> : start of time window for spike detection</p>
<p><strong>end</strong> : end of time window for spike detection</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>avg_rate</strong> : average firing rate in spikes/sec</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.average_voltage">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">average_voltage</code><span class="sig-paren">(</span><em>v</em>, <em>t</em>, <em>start=None</em>, <em>end=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#average_voltage"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.average_voltage" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate average voltage between start and end.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : numpy array of voltage time series in mV</p>
<p><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>start</strong> : start of time window for spike detection (optional, default None)</p>
<p><strong>end</strong> : end of time window for spike detection (optional, default None)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>v_avg</strong> : average voltage</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.calculate_dvdt">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">calculate_dvdt</code><span class="sig-paren">(</span><em>v</em>, <em>t</em>, <em>filter=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#calculate_dvdt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.calculate_dvdt" title="Permalink to this definition">¶</a></dt>
<dd><p>Low-pass filters (if requested) and differentiates voltage by time.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : numpy array of voltage time series in mV</p>
<p><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>filter</strong> : cutoff frequency for 4-pole low-pass Bessel filter in kHz (optional, default None)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>dvdt</strong> : numpy array of time-derivative of voltage (V/s = mV/ms)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.check_thresholds_and_peaks">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">check_thresholds_and_peaks</code><span class="sig-paren">(</span><em>v</em>, <em>t</em>, <em>spike_indexes</em>, <em>peak_indexes</em>, <em>upstroke_indexes</em>, <em>end=None</em>, <em>max_interval=0.005</em>, <em>thresh_frac=0.05</em>, <em>filter=10.0</em>, <em>dvdt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#check_thresholds_and_peaks"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.check_thresholds_and_peaks" title="Permalink to this definition">¶</a></dt>
<dd><p>Validate thresholds and peaks for set of spikes</p>
<p>Check that peaks and thresholds for consecutive spikes do not overlap
Spikes with overlapping thresholds and peaks will be merged.</p>
<p>Check that peaks and thresholds for a given spike are not too far apart.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : numpy array of voltage time series in mV</p>
<p><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>spike_indexes</strong> : numpy array of spike indexes</p>
<p><strong>peak_indexes</strong> : numpy array of indexes of spike peaks</p>
<p><strong>upstroke_indexes</strong> : numpy array of indexes of spike upstrokes</p>
<p><strong>max_interval</strong> : maximum allowed time between start of spike and time of peak in sec (default 0.005)</p>
<p><strong>thresh_frac</strong> : fraction of average upstroke for threshold calculation (optional, default 0.05)</p>
<p><strong>filter</strong> : cutoff frequency for 4-pole low-pass Bessel filter in kHz (optional, default 10)</p>
<p><strong>dvdt</strong> : pre-calculated time-derivative of voltage (optional)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>spike_indexes</strong> : numpy array of modified spike indexes</p>
<p><strong>peak_indexes</strong> : numpy array of modified spike peak indexes</p>
<p><strong>upstroke_indexes</strong> : numpy array of modified spike upstroke indexes</p>
<p class="last"><strong>clipped</strong> : numpy array of clippped status of spikes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.detect_bursts">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">detect_bursts</code><span class="sig-paren">(</span><em>isis</em>, <em>isi_types</em>, <em>fast_tr_v</em>, <em>fast_tr_t</em>, <em>slow_tr_v</em>, <em>slow_tr_t</em>, <em>thr_v</em>, <em>tol=0.5</em>, <em>pause_cost=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#detect_bursts"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.detect_bursts" title="Permalink to this definition">¶</a></dt>
<dd><p>Detect bursts in spike train.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>isis</strong> : numpy array of n interspike intervals</p>
<p><strong>isi_types</strong> : numpy array of n interspike interval types</p>
<p><strong>fast_tr_v</strong> : numpy array of fast trough voltages for the n + 1 spikes of the train</p>
<p><strong>fast_tr_t</strong> : numpy array of fast trough times for the n + 1 spikes of the train</p>
<p><strong>slow_tr_v</strong> : numpy array of slow trough voltages for the n + 1 spikes of the train</p>
<p><strong>slow_tr_t</strong> : numpy array of slow trough times for the n + 1 spikes of the train</p>
<p><strong>thr_v</strong> : numpy array of threshold voltages for the n + 1 spikes of the train</p>
<p><strong>tol</strong> : tolerance for the difference in slow trough voltages and thresholds (default 0.5 mV)</p>
<blockquote>
<div><p>Used to identify &#8220;delay&#8221; interspike intervals that occur within a burst</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>bursts</strong> : list of bursts</p>
<blockquote class="last">
<div><p>Each item in list is a tuple of the form (burst_index, start, end) where <cite>burst_index</cite>
is a comparison index between the highest instantaneous rate within the burst vs
the highest instantaneous rate outside the burst. <cite>start</cite> is the index of the first
ISI of the burst, and <cite>end</cite> is the ISI index immediately following the burst.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.detect_pauses">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">detect_pauses</code><span class="sig-paren">(</span><em>isis</em>, <em>isi_types</em>, <em>cost_weight=1.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#detect_pauses"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.detect_pauses" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine which ISIs are &#8220;pauses&#8221; in ongoing firing.</p>
<p>Pauses are unusually long ISIs with a &#8220;detour reset&#8221; among &#8220;direct resets&#8221;.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>isis</strong> : numpy array of interspike intervals</p>
<p><strong>isi_types</strong> : numpy array of interspike interval types (&#8216;direct&#8217; or &#8216;detour&#8217;)</p>
<p><strong>cost_weight</strong> : weight for cost function for calling an ISI a pause</p>
<blockquote>
<div><p>Higher cost weights lead to fewer ISIs identified as pauses. The cost function
also depends on the difference between the duration of the &#8220;pause&#8221; ISIs and the
average duration and standard deviation of &#8220;non-pause&#8221; ISIs.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>pauses</strong> : numpy array of indices corresponding to pauses in <cite>isis</cite></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.detect_putative_spikes">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">detect_putative_spikes</code><span class="sig-paren">(</span><em>v</em>, <em>t</em>, <em>start=None</em>, <em>end=None</em>, <em>filter=10.0</em>, <em>dv_cutoff=20.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#detect_putative_spikes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.detect_putative_spikes" title="Permalink to this definition">¶</a></dt>
<dd><p>Perform initial detection of spikes and return their indexes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : numpy array of voltage time series in mV</p>
<p><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>start</strong> : start of time window for spike detection (optional)</p>
<p><strong>end</strong> : end of time window for spike detection (optional)</p>
<p><strong>filter</strong> : cutoff frequency for 4-pole low-pass Bessel filter in kHz (optional, default 10)</p>
<p><strong>dv_cutoff</strong> : minimum dV/dt to qualify as a spike in V/s (optional, default 20)</p>
<p><strong>dvdt</strong> : pre-calculated time-derivative of voltage (optional)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>putative_spikes</strong> : numpy array of preliminary spike indexes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.estimate_adjusted_detection_parameters">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">estimate_adjusted_detection_parameters</code><span class="sig-paren">(</span><em>v_set</em>, <em>t_set</em>, <em>interval_start</em>, <em>interval_end</em>, <em>filter=10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#estimate_adjusted_detection_parameters"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.estimate_adjusted_detection_parameters" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate adjusted values for spike detection by analyzing a period when the voltage
changes quickly but passively (due to strong current stimulation), which can result
in spurious spike detection results.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v_set</strong> : list of numpy arrays of voltage time series in mV</p>
<p><strong>t_set</strong> : list of numpy arrays of times in seconds</p>
<p><strong>interval_start</strong> : start of analysis interval (sec)</p>
<p><strong>interval_end</strong> : end of analysis interval (sec)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>new_dv_cutoff</strong> : adjusted dv/dt cutoff (V/s)</p>
<p class="last"><strong>new_thresh_frac</strong> : adjusted fraction of avg upstroke to find threshold</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.filter_putative_spikes">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">filter_putative_spikes</code><span class="sig-paren">(</span><em>v</em>, <em>t</em>, <em>spike_indexes</em>, <em>peak_indexes</em>, <em>min_height=2.0</em>, <em>min_peak=-30.0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#filter_putative_spikes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.filter_putative_spikes" title="Permalink to this definition">¶</a></dt>
<dd><dl class="docutils">
<dt>Filter out events that are unlikely to be spikes based on:</dt>
<dd><ul class="first last simple">
<li>Height (threshold to peak)</li>
<li>Absolute peak level</li>
</ul>
</dd>
</dl>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : numpy array of voltage time series in mV</p>
<p><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>spike_indexes</strong> : numpy array of preliminary spike indexes</p>
<p><strong>peak_indexes</strong> : numpy array of indexes of spike peaks</p>
<p><strong>min_height</strong> : minimum acceptable height from threshold to peak in mV (optional, default 2)</p>
<p><strong>min_peak</strong> : minimum acceptable absolute peak level in mV (optional, default -30)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>spike_indexes</strong> : numpy array of threshold indexes</p>
<p class="last"><strong>peak_indexes</strong> : numpy array of peak indexes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.find_downstroke_indexes">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">find_downstroke_indexes</code><span class="sig-paren">(</span><em>v</em>, <em>t</em>, <em>peak_indexes</em>, <em>trough_indexes</em>, <em>clipped=None</em>, <em>filter=10.0</em>, <em>dvdt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#find_downstroke_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.find_downstroke_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Find indexes of minimum voltage (troughs) between spikes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : numpy array of voltage time series in mV</p>
<p><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>peak_indexes</strong> : numpy array of spike peak indexes</p>
<p><strong>trough_indexes</strong> : numpy array of threshold indexes</p>
<p><strong>clipped: boolean array - False if spike not clipped by edge of window</strong></p>
<p><strong>filter</strong> : cutoff frequency for 4-pole low-pass Bessel filter in kHz (optional, default 10)</p>
<p><strong>dvdt</strong> : pre-calculated time-derivative of voltage (optional)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>downstroke_indexes</strong> : numpy array of downstroke indexes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.find_peak_indexes">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">find_peak_indexes</code><span class="sig-paren">(</span><em>v</em>, <em>t</em>, <em>spike_indexes</em>, <em>end=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#find_peak_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.find_peak_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Find indexes of spike peaks.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : numpy array of voltage time series in mV</p>
<p><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>spike_indexes</strong> : numpy array of preliminary spike indexes</p>
<p class="last"><strong>end</strong> : end of time window for spike detection (optional)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.find_time_index">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">find_time_index</code><span class="sig-paren">(</span><em>t</em>, <em>t_0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#find_time_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.find_time_index" title="Permalink to this definition">¶</a></dt>
<dd><p>Find the index value of a given time (t_0) in a time series (t).</p>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.find_trough_indexes">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">find_trough_indexes</code><span class="sig-paren">(</span><em>v</em>, <em>t</em>, <em>spike_indexes</em>, <em>peak_indexes</em>, <em>clipped=None</em>, <em>end=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#find_trough_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.find_trough_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Find indexes of minimum voltage (trough) between spikes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : numpy array of voltage time series in mV</p>
<p><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>spike_indexes</strong> : numpy array of spike indexes</p>
<p><strong>peak_indexes</strong> : numpy array of spike peak indexes</p>
<p><strong>end</strong> : end of time window (optional)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>trough_indexes</strong> : numpy array of threshold indexes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.find_upstroke_indexes">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">find_upstroke_indexes</code><span class="sig-paren">(</span><em>v</em>, <em>t</em>, <em>spike_indexes</em>, <em>peak_indexes</em>, <em>filter=10.0</em>, <em>dvdt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#find_upstroke_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.find_upstroke_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Find indexes of maximum upstroke of spike.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : numpy array of voltage time series in mV</p>
<p><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>spike_indexes</strong> : numpy array of preliminary spike indexes</p>
<p><strong>peak_indexes</strong> : numpy array of indexes of spike peaks</p>
<p><strong>filter</strong> : cutoff frequency for 4-pole low-pass Bessel filter in kHz (optional, default 10)</p>
<p><strong>dvdt</strong> : pre-calculated time-derivative of voltage (optional)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>upstroke_indexes</strong> : numpy array of upstroke indexes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.find_widths">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">find_widths</code><span class="sig-paren">(</span><em>v</em>, <em>t</em>, <em>spike_indexes</em>, <em>peak_indexes</em>, <em>trough_indexes</em>, <em>clipped=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#find_widths"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.find_widths" title="Permalink to this definition">¶</a></dt>
<dd><p>Find widths at half-height for spikes.</p>
<p>Widths are only returned when heights are defined</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : numpy array of voltage time series in mV</p>
<p><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>spike_indexes</strong> : numpy array of spike indexes</p>
<p><strong>peak_indexes</strong> : numpy array of spike peak indexes</p>
<p><strong>trough_indexes</strong> : numpy array of trough indexes</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>widths</strong> : numpy array of spike widths in sec</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.fit_membrane_time_constant">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">fit_membrane_time_constant</code><span class="sig-paren">(</span><em>v</em>, <em>t</em>, <em>start</em>, <em>end</em>, <em>min_rsme=0.0001</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#fit_membrane_time_constant"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.fit_membrane_time_constant" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit an exponential to estimate membrane time constant between start and end</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : numpy array of voltages in mV</p>
<p><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>start</strong> : start of time window for exponential fit</p>
<p><strong>end</strong> : end of time window for exponential fit</p>
<p><strong>min_rsme: minimal acceptable root mean square error (default 1e-4)</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>a, inv_tau, y0</strong> : Coeffients of equation y0 + a * exp(-inv_tau * x)</p>
<p class="last">returns np.nan for values if fit fails</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.fit_prespike_time_constant">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">fit_prespike_time_constant</code><span class="sig-paren">(</span><em>v</em>, <em>t</em>, <em>start</em>, <em>spike_time</em>, <em>dv_limit=-0.001</em>, <em>tau_limit=0.3</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#fit_prespike_time_constant"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.fit_prespike_time_constant" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the dominant time constant of the pre-spike rise in voltage</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : numpy array of voltage time series in mV</p>
<p><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>start</strong> : start of voltage rise (seconds)</p>
<p><strong>spike_time</strong> : time of first spike (seconds)</p>
<p><strong>dv_limit</strong> : dV/dt cutoff (default -0.001)</p>
<blockquote>
<div><p>Shortens fit window if rate of voltage drop exceeds this limit</p>
</div></blockquote>
<p><strong>tau_limit</strong> : upper bound for slow time constant (seconds, default 0.3)</p>
<blockquote>
<div><p>If the slower time constant of a double-exponential fit is twice that of the faster
and exceeds this limit, the faster one will be considered the dominant one</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>tau</strong> : dominant time constant (seconds)</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.get_isis">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">get_isis</code><span class="sig-paren">(</span><em>t</em>, <em>spikes</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#get_isis"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.get_isis" title="Permalink to this definition">¶</a></dt>
<dd><p>Find interspike intervals in sec between spikes (as indexes).</p>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.has_fixed_dt">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">has_fixed_dt</code><span class="sig-paren">(</span><em>t</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#has_fixed_dt"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.has_fixed_dt" title="Permalink to this definition">¶</a></dt>
<dd><p>Check that all time intervals are identical.</p>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.latency">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">latency</code><span class="sig-paren">(</span><em>t</em>, <em>spikes</em>, <em>start</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#latency"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.latency" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate time to the first spike.</p>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.norm_diff">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">norm_diff</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#norm_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.norm_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate average of (a[i] - a[i+1]) / (a[i] + a[i+1]).</p>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.norm_sq_diff">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">norm_sq_diff</code><span class="sig-paren">(</span><em>a</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#norm_sq_diff"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.norm_sq_diff" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate average of (a[i] - a[i+1])^2 / (a[i] + a[i+1])^2.</p>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.ephys_features.refine_threshold_indexes">
<code class="descclassname">allensdk.ephys.ephys_features.</code><code class="descname">refine_threshold_indexes</code><span class="sig-paren">(</span><em>v</em>, <em>t</em>, <em>upstroke_indexes</em>, <em>thresh_frac=0.05</em>, <em>filter=10.0</em>, <em>dvdt=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/ephys_features.html#refine_threshold_indexes"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.ephys_features.refine_threshold_indexes" title="Permalink to this definition">¶</a></dt>
<dd><p>Refine threshold detection of previously-found spikes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>v</strong> : numpy array of voltage time series in mV</p>
<p><strong>t</strong> : numpy array of times in seconds</p>
<p><strong>upstroke_indexes</strong> : numpy array of indexes of spike upstrokes (for threshold target calculation)</p>
<p><strong>thresh_frac</strong> : fraction of average upstroke for threshold calculation (optional, default 0.05)</p>
<p><strong>filter</strong> : cutoff frequency for 4-pole low-pass Bessel filter in kHz (optional, default 10)</p>
<p><strong>dvdt</strong> : pre-calculated time-derivative of voltage (optional)</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>threshold_indexes</strong> : numpy array of threshold indexes</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="module-allensdk.ephys.extract_cell_features">
<span id="allensdk-ephys-extract-cell-features-module"></span><h2>allensdk.ephys.extract_cell_features module<a class="headerlink" href="#module-allensdk.ephys.extract_cell_features" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="allensdk.ephys.extract_cell_features.extract_cell_features">
<code class="descclassname">allensdk.ephys.extract_cell_features.</code><code class="descname">extract_cell_features</code><span class="sig-paren">(</span><em>data_set</em>, <em>ramp_sweep_numbers</em>, <em>short_square_sweep_numbers</em>, <em>long_square_sweep_numbers</em>, <em>subthresh_min_amp=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/extract_cell_features.html#extract_cell_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.extract_cell_features.extract_cell_features" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="allensdk.ephys.extract_cell_features.extract_sweep_features">
<code class="descclassname">allensdk.ephys.extract_cell_features.</code><code class="descname">extract_sweep_features</code><span class="sig-paren">(</span><em>data_set</em>, <em>sweeps_by_type</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/extract_cell_features.html#extract_sweep_features"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.extract_cell_features.extract_sweep_features" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="function">
<dt id="allensdk.ephys.extract_cell_features.get_ramp_stim_characteristics">
<code class="descclassname">allensdk.ephys.extract_cell_features.</code><code class="descname">get_ramp_stim_characteristics</code><span class="sig-paren">(</span><em>i</em>, <em>t</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/extract_cell_features.html#get_ramp_stim_characteristics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.extract_cell_features.get_ramp_stim_characteristics" title="Permalink to this definition">¶</a></dt>
<dd><p>Identify the start time and start index of a ramp sweep.</p>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.extract_cell_features.get_square_stim_characteristics">
<code class="descclassname">allensdk.ephys.extract_cell_features.</code><code class="descname">get_square_stim_characteristics</code><span class="sig-paren">(</span><em>i</em>, <em>t</em>, <em>no_test_pulse=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/extract_cell_features.html#get_square_stim_characteristics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.extract_cell_features.get_square_stim_characteristics" title="Permalink to this definition">¶</a></dt>
<dd><p>Identify the start time, duration, amplitude, start index, and
end index of a square stimulus.
This assumes that there is a test pulse followed by the stimulus square.</p>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.extract_cell_features.get_stim_characteristics">
<code class="descclassname">allensdk.ephys.extract_cell_features.</code><code class="descname">get_stim_characteristics</code><span class="sig-paren">(</span><em>i</em>, <em>t</em>, <em>no_test_pulse=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/extract_cell_features.html#get_stim_characteristics"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.extract_cell_features.get_stim_characteristics" title="Permalink to this definition">¶</a></dt>
<dd><p>Identify the start time, duration, amplitude, start index, and
end index of a general stimulus.
This assumes that there is a test pulse followed by the stimulus square.</p>
</dd></dl>

<dl class="function">
<dt id="allensdk.ephys.extract_cell_features.mean_features_spike_zero">
<code class="descclassname">allensdk.ephys.extract_cell_features.</code><code class="descname">mean_features_spike_zero</code><span class="sig-paren">(</span><em>sweeps</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/extract_cell_features.html#mean_features_spike_zero"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.extract_cell_features.mean_features_spike_zero" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute mean feature values for the first spike in list of extractors</p>
</dd></dl>

</div>
<div class="section" id="module-allensdk.ephys.feature_extractor">
<span id="allensdk-ephys-feature-extractor-module"></span><h2>allensdk.ephys.feature_extractor module<a class="headerlink" href="#module-allensdk.ephys.feature_extractor" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="allensdk.ephys.feature_extractor.EphysFeatureExtractor">
<em class="property">class </em><code class="descclassname">allensdk.ephys.feature_extractor.</code><code class="descname">EphysFeatureExtractor</code><a class="reference internal" href="_modules/allensdk/ephys/feature_extractor.html#EphysFeatureExtractor"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.feature_extractor.EphysFeatureExtractor" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="allensdk.ephys.feature_extractor.EphysFeatureExtractor.adaptation_index">
<code class="descname">adaptation_index</code><span class="sig-paren">(</span><em>spikes</em>, <em>stim_end</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/feature_extractor.html#EphysFeatureExtractor.adaptation_index"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.feature_extractor.EphysFeatureExtractor.adaptation_index" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.feature_extractor.EphysFeatureExtractor.calculate_trough">
<code class="descname">calculate_trough</code><span class="sig-paren">(</span><em>spike</em>, <em>v</em>, <em>curr</em>, <em>t</em>, <em>next_idx</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/feature_extractor.html#EphysFeatureExtractor.calculate_trough"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.feature_extractor.EphysFeatureExtractor.calculate_trough" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.feature_extractor.EphysFeatureExtractor.isicv">
<code class="descname">isicv</code><span class="sig-paren">(</span><em>spikes</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/feature_extractor.html#EphysFeatureExtractor.isicv"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.feature_extractor.EphysFeatureExtractor.isicv" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.feature_extractor.EphysFeatureExtractor.process_instance">
<code class="descname">process_instance</code><span class="sig-paren">(</span><em>name</em>, <em>v</em>, <em>curr</em>, <em>t</em>, <em>onset</em>, <em>dur</em>, <em>stim_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/feature_extractor.html#EphysFeatureExtractor.process_instance"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.feature_extractor.EphysFeatureExtractor.process_instance" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.feature_extractor.EphysFeatureExtractor.push_summary">
<code class="descname">push_summary</code><span class="sig-paren">(</span><em>new_summary</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/feature_extractor.html#EphysFeatureExtractor.push_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.feature_extractor.EphysFeatureExtractor.push_summary" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.feature_extractor.EphysFeatureExtractor.score_feature_set">
<code class="descname">score_feature_set</code><span class="sig-paren">(</span><em>set_num</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/feature_extractor.html#EphysFeatureExtractor.score_feature_set"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.feature_extractor.EphysFeatureExtractor.score_feature_set" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.feature_extractor.EphysFeatureExtractor.summarize">
<code class="descname">summarize</code><span class="sig-paren">(</span><em>summary</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/feature_extractor.html#EphysFeatureExtractor.summarize"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.feature_extractor.EphysFeatureExtractor.summarize" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="class">
<dt id="allensdk.ephys.feature_extractor.EphysFeatures">
<em class="property">class </em><code class="descclassname">allensdk.ephys.feature_extractor.</code><code class="descname">EphysFeatures</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/feature_extractor.html#EphysFeatures"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.feature_extractor.EphysFeatures" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<dl class="method">
<dt id="allensdk.ephys.feature_extractor.EphysFeatures.clone">
<code class="descname">clone</code><span class="sig-paren">(</span><em>param_dict</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/feature_extractor.html#EphysFeatures.clone"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.feature_extractor.EphysFeatures.clone" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="allensdk.ephys.feature_extractor.EphysFeatures.print_out">
<code class="descname">print_out</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/allensdk/ephys/feature_extractor.html#EphysFeatures.print_out"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#allensdk.ephys.feature_extractor.EphysFeatures.print_out" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-allensdk.ephys">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-allensdk.ephys" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h3><a href="index.html">Contents</a></h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Install Guide</a><ul class="simple">
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="data_resources.html">Data Resources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="brain_observatory.html">Brain Observatory</a></li>
<li class="toctree-l2"><a class="reference internal" href="cell_types.html">Cell Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="connectivity.html">Mouse Connectivity</a></li>
<li class="toctree-l2"><a class="reference internal" href="reference_space.html">Reference Space</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_api_client.html">API Access</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="models.html">Models</a><ul>
<li class="toctree-l2"><a class="reference internal" href="glif_models.html">Generalized LIF</a></li>
<li class="toctree-l2"><a class="reference internal" href="biophysical_models.html">Biophysical</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="authors.html">Authors</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="allensdk.html">Source Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="allensdk.api.html">allensdk.api package</a></li>
<li class="toctree-l2"><a class="reference internal" href="allensdk.brain_observatory.html">allensdk.brain_observatory package</a></li>
<li class="toctree-l2"><a class="reference internal" href="allensdk.config.html">allensdk.config package</a></li>
<li class="toctree-l2"><a class="reference internal" href="allensdk.core.html">allensdk.core package</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">allensdk.ephys package</a></li>
<li class="toctree-l2"><a class="reference internal" href="allensdk.model.html">allensdk.model package</a></li>
<li class="toctree-l2"><a class="reference internal" href="allensdk.morphology.html">allensdk.morphology package</a></li>
<li class="toctree-l2"><a class="reference internal" href="allensdk.test_utilities.html">allensdk.test_utilities package</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/AllenInstitute/AllenSDK">Github Profile</a></li>
</ul>

<h3> Questions </h3>
<p class="questions">
  Send any questions using the <a href="http://alleninstitute.org/contact_us/index.html">Send Us a Message</a> link below, 
  or submit your question to <a href="http://stackoverflow.com/">StackOverflow</a> using with the 'allen-sdk' tag.
</p>

<p class="questions">
  If you encounter any problems using the AllenSDK, please create an issue on <a href="http://github.com/alleninstitute/allensdk/issues/">Github's issue tracker</a>.
</p>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>


    <div class="footer" role="contentinfo">
    </div>
<script type="text/javascript" src="http://www.brain-map.org/external_assets/javascripts/portalFooter.js"></script>


  </body>
</html>