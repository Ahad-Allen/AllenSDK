{
  "Interface" :
  {
    "SuperInterface" :
    {
      "source" :
      {
        "_datatype" : "str",
        "_description" : "Origin of the data represented in this interface",
        "_include" : "mandatory"
      },
	    "_mandatory_timeseries" : [ ],
      "[]" :
      {
        "_datatype" : "unrestricted",
        "_description" : "custom field",
        "_include" : "optional",
        "_attributes" : 
        {
          "neurodata_type" :
          {
            "_datatype" : "str",
            "_description" : "Custom field",
            "_value" : "Custom",
            "_include" : "mandatory"
          }
        }
      },
      "_attributes" :
      {
        "neurodata_type" : 
        {
          "_datatype" : "str", "_include" : "mandatory", "_value" : "Interface"
        }
      }
    },
    "Position" :
    {
      "_description" : "Position data, whether along the x, xy or xyz axis",
      "_include" : "optional",
	    "_mandatory_timeseries" : [ "SpatialSeries" ]
    },
    "EyeTracking" :
    {
      "_description" : "Eye-tracking data, representing direction of gaze",
      "_include" : "optional",
	    "_mandatory_timeseries" : [ "SpatialSeries" ]
    },
    "PupilTracking" :
    {
      "_description" : "Eye-tracking data, representing pupil size",
      "_include" : "optional",
	    "_mandatory_timeseries" : [ "TimeSeries" ]
    },
    "CompassDirection" :
    {
      "_description" : "Direction as measured radially. Spatial series reference frame should indicate which direction corresponds to zero and what is the direction of positive rotation",
      "_include" : "optional",
	    "_mandatory_timeseries" : [ "SpatialSeries" ]
    },
    "FilteredEphys" :
    {
      "_description" : "Ephys data from one or more channels that is subjected to filtering, such as for gamma or theta oscillations (LFP has its own interface). Filter properties should be noted in the ElectricalSeries",
      "_include" : "optional",
	    "_mandatory_timeseries" : [ "ElectricalSeries" ]
    },
    "LFP" :
    {
      "_description" : "LFP data from one or more channels. Filter properties should be noted in the ElectricalSeries",
      "_include" : "optional",
	    "_mandatory_timeseries" : [ "TimeSeries" ]
    },
    "EventWaveform" :
    {
      "_description" : "Waveform of detected extracellularly recorded spike events",
      "_include" : "optional",
	    "_mandatory_timeseries" : [ "SpikeEventSeries" ]
    },
    "EventDetection" :
    {
      "_description" : "General container for storing event series",
      "_include" : "optional",
      "times" :
      {
        "_datatype" : "f8",
        "_include" : "mandatory"
      },
      "detection_method" :
      {
        "_datatype" : "str",
        "_description" : "Description of how events were detected, such as voltage threshold, or dV/dT threshold, as well as relevant values",
        "_include" : "mandatory"
      },
      "source_idx" : 
      {
        "_datatype" : "int32",
        "_description" : "Indices into source TimeSeries::data array corresponding to time of event. Module description should define what is meant by time of event (eg, .25ms before threshold crossing). Index points to each event in the raw data",
        "_include" : "mandatory"
      },
      "source_timeseries" :
      {
        "_datatype" : "timeseries",
        "_description" : "Link to ElectricalSeries that events were pulled from",
        "_include" : "mandatory"
      }
    },
    "FeatureExtraction" :
    {
      "_description" : "General container for storing event series",
      "_include" : "optional",
      "features" :
      {
        "_datatype" : "f4",
        "_description" : "Multi-dimensional array of features extracted from each event. Array structure: [event number][channel number][feature number]",
        "_include" : "mandatory"
      },
      "times" :
      {
        "_datatype" : "f8",
        "_description" : "Time of events that features correspond to (can be link",
        "_include" : "mandatory"
      },
      "description" :
      {
        "_datatype" : "str",
        "_description" : "Text array with description (eg, PC1) for each of the extracted features",
        "_include" : "mandatory"
      },
      "electrode_idx" :
      {
        "_datatype" : "int32",
        "_description" : "Indices of each channel here to electrodes described in extracellular_ephys/electrode_map",
        "_include" : "mandatory"
      }
    },
    "Clustering" :
    {
      "_description" : "Clustered spike data, whether from automatic clustering tools (eg, klustakwik) or as a result of manual sorting",
      "_include" : "optional",
      "times" :
      {
        "_datatype" : "f8",
        "_description" : "Times of clustered events",
        "_include" : "mandatory"
      },
      "num" :
      {
        "_datatype" : "int32",
        "_description" : "Cluster number for each event",
        "_include" : "mandatory"
      },
      "cluster_nums" :
      {
        "_datatype" : "int32",
        "_description" : "List of cluster numbers that are part of this interface (cluster numbers can be non-continuous)",
        "_include" : "mandatory"
      },
      "peak_over_rms" :
      {
        "_datatype" : "f4",
        "_description" : "Maximum ratio of waveform peak to RMS on any cahnnel in the cluster (basic clustering metric)",
        "_include" : "mandatory"
      },
      "description" :
      {
        "_datatype" : "str",
        "_description" : "Description of clusters or clustering (eg, cluster 0 is electrical noise, clusters curated using Klusters, etc)",
        "_include" : "mandatory"
      }
    },
    "ClusterWaveform" :
    {
      "_description" : "Mean waveform shape of clusters. Waveforms should be high-pass filtered (ie, not the same bandpass filter used waveform analysis and clustering",
      "_include" : "optional",
      "waveform_mean" :
      {
        "_datatype" : "f4",
        "_description" : "Mean waveform of each cluster, using the same indices for each wave as cluster numbers in the associated clustering module (ie, cluster 3 is array slot [3]. Slots for missing clusters should be zero-filled",
        "_include" : "mandatory"
      },
      "waveform_sd" :
      {
        "_datatype" : "f4",
        "_description" : "Standard deviation of all points in waveforms for each cluster",
        "_include" : "mandatory"
      },
      "waveform_filtering" :
      {
        "_datatype" : "str",
        "_description" : "Filtering applied to data before generating mean/SD",
        "_include" : "mandatory"
      },
      "clusterwaveform_source" :
      {
        "_datatype" : "str",
        "_description" : "Path to clustering module that was the source of the data shown here (can be path to this module, if clustering info is published here",
        "_include" : "mandatory"
      }
    },
    "BehavioralEvents" :
    {
      "_description" : "General container for storing event series",
      "_include" : "optional",
	    "_mandatory_timeseries" : [ "TimeSeries" ]
    },
    "BehavioralTimeSeries" :
    {
      "_description" : "General container for storing event series",
      "_include" : "optional",
	    "_mandatory_timeseries" : [ "TimeSeries" ]
    },
    "BehavioralEpochs" :
    {
      "_description" : "General container for storing intervals",
      "_include" : "optional",
	    "_mandatory_timeseries" : [ "IntervalSeries" ]
    },

    "UnitTimes" :
    {
      "_description" : "Estimated spike times from a single unit",
      "_include" : "optional",
      "unit_list" :
      {
        "_datatype" : "str",
        "_include" : "required",
        "_description" : "List of unit names present in interface"
      },
      "{}" :
      {
        "_datatype" : "group",
        "_description" : "Folder storing data from one unit",
        "_include" : "optional",
        "times" :
        {
          "_datatype" : "f8",
          "_description" : "Spike times for the unit (exact or estimated)",
          "_include" : "mandatory"
        },
        "unit_description" :
        {
          "_datatype" : "str",
          "_description" : "Description of the unit (eg, cell type)",
          "_include" : "mandatory"
        },
        "source" : 
        {
          "_datatype" : "str",
          "_description" : "Name, path or description of where unit times originated",
          "_include" : "mandatory"
        },
        "[]" :
        {
          "_datatype" : "unrestricted",
          "_description" : "custom field",
          "_include" : "optional",
          "_attributes" : 
          {
            "neurodata_type" :
            {
              "_datatype" : "str",
              "_description" : "Custom field",
              "_value" : "Custom",
              "_include" : "mandatory"
            }
          }
        }
      }
    },

    "ImageSegmentation" :
    {
      "_description" : "Stores groups of pixels that define regions of interest from one or more imaging planes",
      "_include" : "optional",
      "<>" :
      {
        "_datatype" : "group",
        "_description" : "Folder containing all segmentation data from a particular imaging plane. Group name is identifier for imaging plane",
        "_include" : "mandatory",
        "_attributes" : 
        {
          "description" :
          {
            "_datatype" : "str",
            "_description" : "Text description of imaging plane",
            "_include" : "optional"
          }
        },
        "roi_list" : 
        {
          "_datatype" : "str",
          "_description" : "List of ROIs in this imaging plane",
          "_include" : "mandatory"
        },
        "imaging_description_link" : 
        {
          "_datatype" : "str",
          "_description" : "Name of description of imaging data under general/optophysiology",
          "_include" : "mandatory",
          "_linkto" : "general/optophysiology"
        },
        "<>" :
        {
          "_datatype" : "group",
          "_description" : "Region of interest. Folder name is identifier",
          "_include" : "mandatory",
          "img_mask" :
          {
            "_datatype" : "f4",
            "_description" : "2D float array describing pixel mask. Values bounded on [0,1]. Array structure: [height][width]",
            "_include" : "mandatory"
          },
          "pix_mask" :
          {
            "_datatype" : "uint16",
            "_description" : "2D int array listing pixels (x,y) that compose mask",
            "_include" : "mandatory",
            "_attributes" :
            {
              "weight" :
              {
                "_datatype" : "f4",
                "_description" : "Array listing weight of each pixel",
                "_include" : "mandatory"
              }
            }
          },
          "roi_description" :
          {
            "_datatype" : "str",
            "_description" : "Description of this ROI",
            "_include" : "mandatory"
          },
          "[]" :
          {
            "_datatype" : "unrestricted",
            "_description" : "custom field",
            "_include" : "optional",
            "_attributes" : 
            {
              "neurodata_type" :
              {
                "_datatype" : "str",
                "_description" : "Custom field",
                "_value" : "Custom",
                "_include" : "mandatory"
              }
            }
          }
        },
        "[]" :
        {
          "_datatype" : "unrestricted",
          "_description" : "custom field",
          "_include" : "optional",
          "_attributes" : 
          {
            "neurodata_type" :
            {
              "_datatype" : "str",
              "_description" : "Custom field",
              "_value" : "Custom",
              "_include" : "mandatory"
            }
          }
        }
      }
    },

    "Florescence" :
    {
      "_description" : "Florescence over time of one or more ROIs. TimeSeries names should correspond to imaging plane names",
      "_include" : "optional",
	    "_mandatory_timeseries" : [ "RoiResponseSeries" ]
    },
    "DfOverF" :
    {
      "_description" : "Df/f over time of one or more ROIs. TimeSeries names should correspond to imaging plane names",
      "_include" : "optional",
	    "_mandatory_timeseries" : [ "RoiResponseSeries" ]
    }
  }
}

